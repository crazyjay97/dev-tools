webpackJsonp([1],{"+skl":function(e,t){},"6LLN":function(e,t){},"7ck+":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=a("VU/8")({name:"App"},l,!1,function(e){a("6LLN")},null,null).exports,i=a("/ocq"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("Layout",[t("Header",[t("h1",{staticStyle:{color:"#c4c4c4"}},[this._v("\n        Code Generator\n      ")])]),this._v(" "),t("Content",[t("router-view")],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")({},s,!1,function(e){a("7ck+")},null,null).exports,u=a("Gu7T"),m=a.n(u),c=a("mvHQ"),d=a.n(c),f=a("Dd8w"),p=a.n(f),h=a("NYxO"),b={data:function(){return{show:!1,selfCols:[],tableName:"",tbs:[],multipleTableCols:[{title:"Column",slot:"selfColumn"},{title:"Linked Table",slot:"tableName"},{title:"Linked Column",slot:"joinColumn"},{title:"Search Column",slot:"searchColumn"},{title:"Alias",slot:"alias",width:130},{title:"Description",slot:"description",width:130},{title:"Action",slot:"action"}],multipleTables:[],tmpMultipleTables:[],columnSettingCols:[{title:"Column",slot:"column"},{title:"Comment",slot:"comment"},{title:"Need Show",slot:"needShow"},{title:"Need Add",slot:"needAdd"},{title:"Need Filter",slot:"needFilter"},{title:"Show Mode",slot:"showMode",width:130},{title:"Dictionary Label",slot:"dictionaryLabel",width:130},{title:"Dictionary Value",slot:"dictionaryValue"}],columnSetting:[],tmpColumnSetting:[]}},computed:p()({},Object(h.c)(["tables"])),methods:p()({},Object(h.b)(["updateTables"]),{onRowDrag:function(e,t){var a=this.columnSetting[e];this.columnSetting[e]=this.columnSetting[t],this.columnSetting[t]=a,this.cloneColumnSetting()},removeRows:function(e){this.multipleTables.splice(e,1),this.cloneTables()},tableChange:function(e){var t=this;this.queryColumn(e.tableName,function(a){e.linkedColumns=a,t.multipleTables.push(-1),t.multipleTables.remove(-1)})},addRow:function(e){var t=this.multipleTables[this.multipleTables.length-1];t.tableName&&t.selfColumn&&t.joinColumn&&t.alias&&t.description&&(this.multipleTables.push({}),this.cloneTables())},init:function(e){var t=this;this.show=!0,this.tableName=e.tableName;var a=this.tables.filter(function(t){return t.tableName==e.tableName})[0];this.queryColumn(e.tableName,function(e){if(t.selfCols=e,t.columnSetting=a&&a.columnSetting&&a.columnSetting.length>0?a.columnSetting:e.map(function(e){return{column:e.columnName,columnDesc:e.columnComment,needShow:!0,needAdd:!0,needFilter:!1,showMode:0}}),t.cloneColumnSetting(),a&&(t.addFields=a.addFields,t.searchFields=a.searchFields,t.multipleTables=a.joinTables?a.joinTables:[]),0==t.multipleTables.length)t.multipleTables.push({tableName:"",selfColumn:"",joinColumn:"",searchColumn:"",alias:"",description:""});else{var n=t.multipleTables[t.multipleTables.length-1],l=n.alias,o=n.description,i=n.joinColumn,s=n.selfColumn,r=n.tableName;l&&o&&i&&s&&r&&t.multipleTables.push({tableName:"",selfColumn:"",joinColumn:"",searchColumn:"",alias:"",description:""})}t.cloneTables()}),this.queryAllTable()},cloneTables:function(){this.tmpMultipleTables=this.multipleTables.map(function(){return{tableName:"",selfColumn:"",joinColumn:"",searchColumn:"",alias:"",description:""}})},cloneColumnSetting:function(){this.tmpColumnSetting=this.columnSetting.map(function(e){return{column:"",columnDesc:"",needShow:"",needAdd:"",needFilter:""}})},queryColumn:function(e,t){this.$ajax({url:"/generator/query/columns",method:"get",params:{tableName:e}}).then(function(e){var a=e.data;t(a.list)})},queryAllTable:function(){var e=this;this.$ajax({url:"/generator/query/all",method:"get"}).then(function(t){var a=t.data;e.tbs=a.list})},commitConfig:function(){var e=this;this.updateTables([].concat(m()(this.tables.filter(function(t){return t.tableName!=e.tableName})),[{tableName:this.tableName,joinTables:this.multipleTables.filter(function(e){var t=e.alias,a=e.description,n=e.joinColumn,l=e.searchColumn,o=e.selfColumn,i=e.tableName;return t&&a&&n&&l&&o&&i}),columnSetting:this.columnSetting}]))}})},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{ref:"config_modal",attrs:{"ok-text":"Commit","cancel-text":"Cancel",title:"Table Config",width:"1200px"},on:{"on-ok":e.commitConfig,onCancel:function(t){e.show=!1}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("Card",{staticClass:"columnSettingCols",attrs:{bordered:!1,"dis-hover":!0,title:"Column Setting"}},[a("Table",{attrs:{stripe:!0,columns:e.columnSettingCols,data:e.tmpColumnSetting,draggable:!0},on:{"on-drag-drop":e.onRowDrag},scopedSlots:e._u([{key:"column",fn:function(t){t.row;var n=t.index;return[a("span",[e._v(e._s(e.columnSetting[n].column))])]}},{key:"comment",fn:function(t){t.row;var n=t.index;return[a("Input",{attrs:{placeholder:"Comment"},model:{value:e.columnSetting[n].columnDesc,callback:function(t){e.$set(e.columnSetting[n],"columnDesc",t)},expression:"columnSetting[index].columnDesc"}})]}},{key:"needShow",fn:function(t){t.row;var n=t.index;return[a("i-switch",{model:{value:e.columnSetting[n].needShow,callback:function(t){e.$set(e.columnSetting[n],"needShow",t)},expression:"columnSetting[index].needShow"}})]}},{key:"needAdd",fn:function(t){t.row;var n=t.index;return[a("i-switch",{model:{value:e.columnSetting[n].needAdd,callback:function(t){e.$set(e.columnSetting[n],"needAdd",t)},expression:"columnSetting[index].needAdd"}})]}},{key:"needFilter",fn:function(t){t.row;var n=t.index;return[a("i-switch",{model:{value:e.columnSetting[n].needFilter,callback:function(t){e.$set(e.columnSetting[n],"needFilter",t)},expression:"columnSetting[index].needFilter"}})]}},{key:"showMode",fn:function(t){t.row;var n=t.index;return[a("Select",{attrs:{filterable:"",placeholder:"Show Mode"},model:{value:e.columnSetting[n].showMode,callback:function(t){e.$set(e.columnSetting[n],"showMode",t)},expression:"columnSetting[index].showMode"}},[a("Option",{attrs:{value:0}},[e._v("Input")]),e._v(" "),a("Option",{attrs:{value:1}},[e._v("Select")])],1)]}},{key:"dictionaryLabel",fn:function(t){t.row;var n=t.index;return[a("Input",{attrs:{placeholder:"type:label"},model:{value:e.columnSetting[n].dictionaryLabel,callback:function(t){e.$set(e.columnSetting[n],"dictionaryLabel",t)},expression:"columnSetting[index].dictionaryLabel"}})]}},{key:"dictionaryValue",fn:function(t){t.row;var n=t.index;return[a("Input",{attrs:{placeholder:"v:l,v:l,v:l"},model:{value:e.columnSetting[n].dictionaryValue,callback:function(t){e.$set(e.columnSetting[n],"dictionaryValue",t)},expression:"columnSetting[index].dictionaryValue"}})]}}])})],1),e._v(" "),a("Card",{staticClass:"multipleTableCols",attrs:{bordered:!1,"dis-hover":!0,title:"Multi Table"}},[a("Table",{attrs:{columns:e.multipleTableCols,data:e.tmpMultipleTables},scopedSlots:e._u([{key:"selfColumn",fn:function(t){t.row;var n=t.index;return[a("Select",{attrs:{filterable:"",placeholder:"Column"},model:{value:e.multipleTables[n].selfColumn,callback:function(t){e.$set(e.multipleTables[n],"selfColumn",t)},expression:"multipleTables[index].selfColumn"}},e._l(e.selfCols,function(t){return a("Option",{key:t.columnName,attrs:{value:t.columnName}},[e._v(e._s(t.columnName)+"\n          ")])}),1)]}},{key:"tableName",fn:function(t){t.row;var n=t.index;return[a("Select",{attrs:{filterable:"",placeholder:"Linked Table"},on:{"on-change":function(t){return e.tableChange(e.multipleTables[n])}},model:{value:e.multipleTables[n].tableName,callback:function(t){e.$set(e.multipleTables[n],"tableName",t)},expression:"multipleTables[index].tableName"}},e._l(e.tbs,function(t){return a("Option",{key:t.tableName,attrs:{value:t.tableName}},[e._v(e._s(t.tableName)+"\n          ")])}),1)]}},{key:"joinColumn",fn:function(t){t.row;var n=t.index;return[a("Select",{attrs:{filterable:"",placeholder:"Linked Column"},model:{value:e.multipleTables[n].joinColumn,callback:function(t){e.$set(e.multipleTables[n],"joinColumn",t)},expression:"multipleTables[index].joinColumn"}},e._l(e.multipleTables[n].linkedColumns,function(t){return a("Option",{key:t.columnName,attrs:{value:t.columnName}},[e._v(e._s(t.columnName)+"\n          ")])}),1)]}},{key:"searchColumn",fn:function(t){t.row;var n=t.index;return[a("Select",{attrs:{filterable:"",placeholder:"Search Column"},model:{value:e.multipleTables[n].searchColumn,callback:function(t){e.$set(e.multipleTables[n],"searchColumn",t)},expression:"multipleTables[index].searchColumn"}},e._l(e.multipleTables[n].linkedColumns,function(t){return a("Option",{key:t.columnName,attrs:{value:t.columnName}},[e._v(e._s(t.columnName)+"\n          ")])}),1)]}},{key:"alias",fn:function(t){t.row;var n=t.index;return[a("Input",{attrs:{filterable:"",placeholder:"Alias"},model:{value:e.multipleTables[n].alias,callback:function(t){e.$set(e.multipleTables[n],"alias",t)},expression:"multipleTables[index].alias"}})]}},{key:"description",fn:function(t){t.row;var n=t.index;return[a("Input",{attrs:{disabled:!(e.multipleTables[n].selfColumn&&e.multipleTables[n].tableName&&e.multipleTables[n].joinColumn&&e.multipleTables[n].alias),filterable:"",placeholder:"Description"},on:{"on-blur":function(t){return e.addRow(n)}},model:{value:e.multipleTables[n].description,callback:function(t){e.$set(e.multipleTables[n],"description",t)},expression:"multipleTables[index].description"}})]}},{key:"action",fn:function(t){t.row;var n=t.index;return[n+1!=e.multipleTables.length?a("Button",{attrs:{icon:"ios-backspace",type:"primary"},on:{click:function(t){return e.removeRows(n)}}},[e._v("\n          Remove\n        ")]):e._e()]}}])})],1)],1)},staticRenderFns:[]};var g=a("VU/8")(b,v,!1,function(e){a("OhLG")},null,null).exports,C={data:function(){return{isLoadingCode:!1,isShow:!1,table:{},tplNames:[],currentTabName:"",code:""}},computed:p()({},Object(h.c)(["tables"]),Object(h.c)(["settings"])),methods:{show:function(e){this.isShow=!0,this.table=e,this.queryTplNames()},queryTplNames:function(){var e=this;this.$ajax({url:"/generator/query/tplNames",method:"get"}).then(function(t){var a=t.data;e.currentTabName=a[0],e.tplNames=a,e.queryCode(a[0])})},queryCode:function(e){var t=this;this.isLoadingCode=!0;var a=[].concat(m()(this.tables));a.filter(function(e){return e.tableName==t.tableName}).forEach(function(e){return e.joinTables=e.joinTables.filter(function(e){var t=e.tableName,a=e.selfColumn,n=e.joinColumn,l=e.alias,o=e.description;return t&&a&&n&&l&&o}).map(function(e){return{tableName:e.tableName,selfColumn:e.selfColumn,joinColumn:e.joinColumn,searchColumn:e.searchColumn,alias:e.alias,description:e.description}})});var n={mainPath:this.settings.mainPath,packageName:this.settings.pkg,moduleName:this.settings.moduleName,authorName:this.settings.author,emailAddress:this.settings.email,removePrefix:this.settings.isRemovePrefix,autoSettingModuleName:this.settings.autoSettingModuleName,templateName:e,modules:a};this.$ajax({url:"/generator/query/code",method:"post",data:n}).then(function(e){var a=e.data;setTimeout(function(){t.code=a,t.isLoadingCode=!1},1e3)})}}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{title:"Code",width:"1200px"},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[a("Tabs",{on:{"on-click":e.queryCode},model:{value:e.currentTabName,callback:function(t){e.currentTabName=t},expression:"currentTabName"}},e._l(e.tplNames,function(t){return a("TabPane",{key:t,attrs:{name:t,label:t}},[e.isLoadingCode?a("div",{staticStyle:{height:"500px",width:"100%",overflow:"auto",position:"relative"}},[a("Spin",{attrs:{fix:"",size:"large"}})],1):a("div",{staticStyle:{height:"500px",width:"100%",overflow:"auto"}},[a("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs",value:e.code,expression:"code"}],attrs:{contenteditable:"true"}},[a("code",{staticClass:"plaintext"})])])])}),1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{size:"large",type:"primary"},on:{click:function(t){e.isShow=!1}}},[e._v("退出")])],1)],1)},staticRenderFns:[]},w={components:{MoreConfig:g,CodeView:a("VU/8")(C,N,!1,null,null,null).exports},data:function(){return{tableName:"",page:1,limit:10,total:0,tbs:[],columns:[{title:"Table Name",key:"tableName"},{title:"Engine",key:"engine"},{title:"Comment",key:"tableComment"},{title:"Create Time",key:"createTime"},{title:"Operator",slot:"operator"}]}},computed:p()({},Object(h.c)(["tables"]),{formData:{get:function(){return this.$store.state.settings},set:function(e){this.$store.commit("updateSettings",e)}},tablesLength:{get:function(){return this.tables.length}}}),mounted:function(){if(this.pageData(),window.localStorage.config){var e=JSON.parse(window.localStorage.config);this.formData.mainPath=e.mainPath,this.formData.pkg=e.pkg,this.formData.moduleName=e.moduleName,this.formData.author=e.author,this.formData.email=e.email,this.formData.isRemovePrefix=e.isRemovePrefix,this.formData.autoSettingModuleName=e.autoSettingModuleName}},methods:p()({openCodeView:function(e){this.$refs.codeView.show(e)},rowClassName:function(e,t){return this.tables.filter(function(t){return t.tableName==e.tableName}).length>0?"row-chosen":""}},Object(h.b)(["updateTables"]),{removeTable:function(e){this.updateTables(this.tables.filter(function(t){return t.tableName!=e}))},pageSizeHandle:function(e){this.limit=e,this.pageData()},pageHandle:function(e){this.page=e,this.pageData()},saveConfig:function(){window.localStorage.config=d()(this.formData)},openConfig:function(e){this.$refs.configModal.init(e)},removeCurrentRow:function(e){this.removeTable(e.tableName)},gen:function(){var e=[].concat(m()(this.tables));e.forEach(function(e){return e.joinTables=e.joinTables.filter(function(e){var t=e.tableName,a=e.selfColumn,n=e.joinColumn,l=e.alias,o=e.description;return t&&a&&n&&l&&o}).map(function(e){return{tableName:e.tableName,selfColumn:e.selfColumn,joinColumn:e.joinColumn,searchColumn:e.searchColumn,alias:e.alias,description:e.description}})});var t={mainPath:this.formData.mainPath,packageName:this.formData.pkg,moduleName:this.formData.moduleName,authorName:this.formData.author,emailAddress:this.formData.email,removePrefix:this.formData.isRemovePrefix,autoSettingModuleName:this.formData.autoSettingModuleName,modules:e};this.$ajax({url:"/generator/gen",method:"post",responseType:"blob",data:t}).then(function(e){var t=new Blob([e.data]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(t,"code.zip");else{var a=document.createElement("a");document.createEvent("HTMLEvents").initEvent("click",!1,!1),a.href=URL.createObjectURL(t),a.download="code.zip",a.style.display="none",document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(a.href)}})},pageData:function(){var e=this;this.$ajax({url:"/generator/list",method:"get",params:{page:this.page,limit:this.limit,tableName:this.tableName}}).then(function(t){var a=t.data;e.total=a.total,e.tbs=a.list})}})},S={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Card",[a("Row",[a("Col",{attrs:{span:"16"}},[e._v("Table Name:\n        "),a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"Typing Table Name",clearable:!0},model:{value:e.tableName,callback:function(t){e.tableName=t},expression:"tableName"}}),e._v(" "),a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:function(t){e.page=e.pageData()}}},[e._v("Search")])],1),e._v(" "),a("Col",{attrs:{span:"6"}},[a("Dropdown",[a("a",{attrs:{href:"javascript:void(0)"}},[a("Tag",{attrs:{type:"dot",color:"primary"}},[e._v("Have Been Added "+e._s(e.tablesLength))])],1),e._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.tables,function(t){var n=t.tableName;return a("DropdownItem",{key:n},[a("div",{staticStyle:{height:"25px"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("span",{staticStyle:{float:"left","line-height":"25px"}},[e._v(e._s(n))])]),e._v(" "),a("Col",{attrs:{span:"8"}},[a("Button",{staticStyle:{position:"relative",bottom:"4px",color:"red"},attrs:{type:"text"},on:{click:function(t){return e.removeTable(n)}}},[e._v("Remove\n                    ")])],1)],1)],1)])}),1)],1),e._v(" "),a("Button",{attrs:{shape:"circle",type:e.tablesLength>0?"warning":"default",disabled:e.tablesLength<1},on:{click:e.gen}},[e._v("\n          Generate File\n        ")])],1),e._v(" "),a("Col",{attrs:{span:"2"}},[a("Poptip",{attrs:{title:"Config",placement:"left"},on:{"on-popper-hide":e.saveConfig}},[a("div",{staticStyle:{width:"400px"},attrs:{slot:"content"},slot:"content"},[a("Form",{attrs:{"label-width":100}},[a("FormItem",{attrs:{label:"Main Path"}},[a("Input",{model:{value:e.formData.mainPath,callback:function(t){e.$set(e.formData,"mainPath",t)},expression:"formData.mainPath"}})],1),e._v(" "),a("FormItem",{attrs:{label:"Package Name"}},[a("Input",{model:{value:e.formData.pkg,callback:function(t){e.$set(e.formData,"pkg",t)},expression:"formData.pkg"}})],1),e._v(" "),a("FormItem",{attrs:{label:"Author Name"}},[a("Input",{model:{value:e.formData.author,callback:function(t){e.$set(e.formData,"author",t)},expression:"formData.author"}})],1),e._v(" "),a("FormItem",{attrs:{label:"Email Address"}},[a("Input",{model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}})],1),e._v(" "),a("FormItem",{attrs:{label:"Module Name"}},[a("Checkbox",{model:{value:e.formData.autoSettingModuleName,callback:function(t){e.$set(e.formData,"autoSettingModuleName",t)},expression:"formData.autoSettingModuleName"}},[e._v("Auto Setting")]),e._v(" "),e.formData.autoSettingModuleName?e._e():a("Input",{staticStyle:{width:"204px"},model:{value:e.formData.moduleName,callback:function(t){e.$set(e.formData,"moduleName",t)},expression:"formData.moduleName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"Remove Prefix"}},[a("i-switch",{attrs:{size:"large"},model:{value:e.formData.isRemovePrefix,callback:function(t){e.$set(e.formData,"isRemovePrefix",t)},expression:"formData.isRemovePrefix"}})],1)],1)],1),e._v(" "),a("Button",{staticStyle:{float:"right",color:"blue"},attrs:{type:"text",icon:"ios-cog-outline"}},[e._v("Config")])],1)],1)],1)],1),e._v(" "),a("Table",{attrs:{columns:e.columns,height:"600",data:e.tbs,"no-data-text":"Can Not Find Table","row-class-name":e.rowClassName},scopedSlots:e._u([{key:"operator",fn:function(t){var n=t.row;return[a("Button",{attrs:{shape:"circle",icon:"ios-more"},on:{click:function(t){return e.openConfig(n)}}},[e._v("Config And Add")]),e._v(" "),a("Button",{attrs:{disabled:0==e.tables.filter(function(e){return e.tableName==n.tableName}).length,shape:"circle"},on:{click:function(t){return e.openCodeView(n)}}},[e._v("Generator Code\n      ")]),e._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:0==!e.tables.filter(function(e){return e.tableName==n.tableName}).length,expression:"!tables.filter(r => r.tableName == row.tableName).length == 0"}],staticClass:"btn-remove",attrs:{shape:"circle",icon:"md-close-circle"},on:{click:function(t){return e.removeCurrentRow(n)}}})]}}])}),e._v(" "),a("Page",{staticStyle:{float:"right"},attrs:{total:e.total,"page-size":e.limit,"show-sizer":""},on:{"on-change":e.pageHandle,"on-page-size-change":e.pageSizeHandle}}),e._v(" "),a("more-config",{ref:"configModal"}),e._v(" "),a("code-view",{ref:"codeView"})],1)},staticRenderFns:[]};var T=a("VU/8")(w,S,!1,function(e){a("Pomi")},null,null).exports;n.default.use(i.a);var x=new i.a({routes:[{path:"/",name:"Main",component:r,children:[{path:"/generator",name:"Generator",component:T}]}]});x.beforeEach(function(e,t,a){"/"===e.path?x.push({name:"Generator"}):a()});var y=x,k=a("BTaQ"),_=a.n(k),D=(a("+skl"),a("mtWM")),j=a.n(D);n.default.use(h.a);var $=new h.a.Store({state:{tables:[],settings:{mainPath:"com.github.crazyjay97",pkg:"com.github.crazyjay97.modules",author:"crazyjay97",email:"zhanweijie111@gmail.com",isRemovePrefix:!0,moduleName:"",autoSettingModuleName:!0}},mutations:{updateTables:function(e,t){e.tables=t},updateSettings:function(e,t){e.settings=t}}}),M=a("5CJf"),L=a.n(M);n.default.prototype.$ajax=j.a,n.default.use(_.a),n.default.use(L.a),n.default.config.productionTip=!1,new n.default({el:"#app",router:y,store:$,components:{App:o},template:"<App/>"}),Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)}},OhLG:function(e,t){},Pomi:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.9fdf9dc91608fddc34bc.js.map