webpackJsonp([1],{"+skl":function(e,t){},"6LLN":function(e,t){},DwTP:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=a("VU/8")({name:"App"},n,!1,function(e){a("6LLN")},null,null).exports,i=a("/ocq"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("Layout",[t("Header",[t("h1",{staticStyle:{color:"#c4c4c4"}},[this._v("\n        Code Generator\n      ")])]),this._v(" "),t("Content",[t("router-view")],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")({},s,!1,function(e){a("uCZS")},null,null).exports,u=a("Gu7T"),m=a.n(u),c=a("mvHQ"),d=a.n(c),f=a("Dd8w"),p=a.n(f),b=a("2bvH"),h={data:function(){return{show:!1,selfCols:[],tableName:"",tbs:[],searchFields:[],addFields:[],multipleTableCols:[{title:"Column",slot:"selfColumn"},{title:"Linked Table",slot:"tableName"},{title:"Linked Column",slot:"joinColumn"},{title:"Alias",slot:"alias",width:130},{title:"Description",slot:"description",width:130},{title:"Action",slot:"action"}],multipleTables:[],tmpMultipleTables:[]}},computed:p()({},Object(b.c)(["tables"]),{columnForTransfer:{get:function(){return this.selfCols.map(function(e){return{key:e.columnName,label:e.columnComment}})}}}),methods:p()({},Object(b.b)(["updateTables"]),{removeRows:function(e){this.multipleTables.splice(e,1),this.cloneTables()},tableChange:function(e){var t=this;this.queryColumn(e.tableName,function(a){e.linkedColumns=a,t.multipleTables.push(-1),t.multipleTables.remove(-1)})},addRow:function(e){var t=this.multipleTables[this.multipleTables.length-1];t.tableName&&t.selfColumn&&t.joinColumn&&t.alias&&t.description&&(this.multipleTables.push({}),this.cloneTables())},init:function(e){var t=this;this.show=!0,this.tableName=e.tableName;var a=this.tables.filter(function(t){return t.tableName==e.tableName})[0];this.queryColumn(e.tableName,function(e){if(t.selfCols=e,t.addFields=e.map(function(e){return e.columnName}),a&&(t.addFields=a.addFields,t.searchFields=a.searchFields,t.multipleTables=a.joinTables?a.joinTables:[]),0==t.multipleTables.length)t.multipleTables.push({tableName:"",selfColumn:"",joinColumn:"",alias:"",description:""});else{var l=t.multipleTables[t.multipleTables.length-1],n=l.alias,o=l.description,i=l.joinColumn,s=l.selfColumn,r=l.tableName;n&&o&&i&&s&&r&&t.multipleTables.push({tableName:"",selfColumn:"",joinColumn:"",alias:"",description:""})}t.cloneTables()}),this.queryAllTable()},cloneTables:function(){this.tmpMultipleTables=this.multipleTables.map(function(){return{tableName:"",selfColumn:"",joinColumn:"",alias:"",description:""}})},queryColumn:function(e,t){this.$ajax({url:"/generator/query/columns",method:"get",params:{tableName:e}}).then(function(e){var a=e.data;t(a.list)})},queryAllTable:function(){var e=this;this.$ajax({url:"/generator/query/all",method:"get"}).then(function(t){var a=t.data;e.tbs=a.list})},commitConfig:function(){var e=this;this.updateTables([].concat(m()(this.tables.filter(function(t){return t.tableName!=e.tableName})),[{tableName:this.tableName,addFields:this.addFields,searchFields:this.searchFields,joinTables:this.multipleTables}]))}})},v={render:function(){var e=this,t=this,a=t.$createElement,l=t._self._c||a;return l("Modal",{ref:"config_modal",attrs:{"ok-text":"Commit","cancel-text":"Cancel",title:"Table Config",width:"1000px"},on:{"on-ok":t.commitConfig,onCancel:function(e){t.show=!1}},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[l("Row",[l("Col",{attrs:{span:"12"}},[l("Card",{attrs:{bordered:!1,"dis-hover":!0,title:"Search Fields"}},[l("Transfer",{attrs:{data:t.columnForTransfer,targetKeys:t.searchFields,filterable:"",titles:["Columns","Chose"],"render-format":function(e){return e.key+"-"+e.label},filterable:""},on:{"on-change":function(t){return e.searchFields=t}}})],1)],1),t._v(" "),l("Col",{attrs:{span:"12"}},[l("Card",{attrs:{bordered:!1,"dis-hover":!0,title:"Add Fields"}},[l("Transfer",{attrs:{data:t.columnForTransfer,targetKeys:t.addFields,filterable:"",titles:["Columns","Chose"],"render-format":function(e){return e.key+"-"+e.label},filterable:""},on:{"on-change":function(t){return e.addFields=t}}})],1)],1)],1),t._v(" "),l("Card",{attrs:{bordered:!1,"dis-hover":!0,title:"Multi Table"}},[l("Table",{attrs:{columns:t.multipleTableCols,data:t.tmpMultipleTables},scopedSlots:t._u([{key:"selfColumn",fn:function(e){e.row;var a=e.index;return[l("Select",{attrs:{filterable:"",placeholder:"Column"},model:{value:t.multipleTables[a].selfColumn,callback:function(e){t.$set(t.multipleTables[a],"selfColumn",e)},expression:"multipleTables[index].selfColumn"}},t._l(t.selfCols,function(e){return l("Option",{key:e.columnName,attrs:{value:e.columnName}},[t._v(t._s(e.columnName)+"\n          ")])}),1)]}},{key:"tableName",fn:function(e){e.row;var a=e.index;return[l("Select",{attrs:{filterable:"",placeholder:"Linked Table"},on:{"on-change":function(e){return t.tableChange(t.multipleTables[a])}},model:{value:t.multipleTables[a].tableName,callback:function(e){t.$set(t.multipleTables[a],"tableName",e)},expression:"multipleTables[index].tableName"}},t._l(t.tbs,function(e){return l("Option",{key:e.tableName,attrs:{value:e.tableName}},[t._v(t._s(e.tableName)+"\n          ")])}),1)]}},{key:"joinColumn",fn:function(e){e.row;var a=e.index;return[l("Select",{attrs:{filterable:"",placeholder:"Linked Column"},model:{value:t.multipleTables[a].joinColumn,callback:function(e){t.$set(t.multipleTables[a],"joinColumn",e)},expression:"multipleTables[index].joinColumn"}},t._l(t.multipleTables[a].linkedColumns,function(e){return l("Option",{key:e.columnName,attrs:{value:e.columnName}},[t._v(t._s(e.columnName)+"\n          ")])}),1)]}},{key:"alias",fn:function(e){e.row;var a=e.index;return[l("Input",{attrs:{filterable:"",placeholder:"Alias"},model:{value:t.multipleTables[a].alias,callback:function(e){t.$set(t.multipleTables[a],"alias",e)},expression:"multipleTables[index].alias"}})]}},{key:"description",fn:function(e){e.row;var a=e.index;return[l("Input",{attrs:{disabled:!(t.multipleTables[a].selfColumn&&t.multipleTables[a].tableName&&t.multipleTables[a].joinColumn&&t.multipleTables[a].alias),filterable:"",placeholder:"Description"},on:{"on-blur":function(e){return t.addRow(a)}},model:{value:t.multipleTables[a].description,callback:function(e){t.$set(t.multipleTables[a],"description",e)},expression:"multipleTables[index].description"}})]}},{key:"action",fn:function(e){e.row;var a=e.index;return[a+1!=t.multipleTables.length?l("Button",{attrs:{icon:"ios-backspace",type:"primary"},on:{click:function(e){return t.removeRows(a)}}},[t._v("\n          Remove\n        ")]):t._e()]}}])})],1)],1)},staticRenderFns:[]};var g={components:{MoreConfig:a("VU/8")(h,v,!1,function(e){a("DwTP")},null,null).exports},data:function(){return{tableName:"",formData:{mainPath:"com.zyiot.tet",pkg:"com.zyiot.tet.modules",author:"professor X",email:"professorX@mail.com",isRemovePrefix:!0,moduleName:"",autoSettingModuleName:!0},page:1,limit:10,total:0,tbs:[],columns:[{title:"Table Name",key:"tableName"},{title:"Engine",key:"engine"},{title:"Comment",key:"tableComment"},{title:"Create Time",key:"createTime"},{title:"Operator",slot:"operator"}]}},computed:p()({},Object(b.c)(["tables"]),{tablesLength:{get:function(){return this.tables.length}}}),mounted:function(){if(this.pageData(),window.localStorage.config){var e=JSON.parse(window.localStorage.config);this.formData.mainPath=e.mainPath,this.formData.pkg=e.pkg,this.formData.moduleName=e.moduleName,this.formData.author=e.author,this.formData.email=e.email,this.formData.isRemovePrefix=e.isRemovePrefix,this.formData.autoSettingModuleName=e.autoSettingModuleName}},methods:p()({},Object(b.b)(["updateTables"]),{removeTable:function(e){this.updateTables(this.tables.filter(function(t){return t.tableName!=e}))},pageSizeHandle:function(e){this.limit=e,this.pageData()},pageHandle:function(e){this.page=e,this.pageData()},saveConfig:function(){window.localStorage.config=d()(this.formData)},openConfig:function(e){this.$refs.configModal.init(e)},gen:function(){var e=[].concat(m()(this.tables));e.forEach(function(e){return e.joinTables=e.joinTables.filter(function(e){var t=e.tableName,a=e.selfColumn,l=e.joinColumn,n=e.alias,o=e.description;return t&&a&&l&&n&&o}).map(function(e){return{tableName:e.tableName,selfColumn:e.selfColumn,joinColumn:e.joinColumn,alias:e.alias,description:e.description}})});var t={mainPath:this.formData.mainPath,packageName:this.formData.pkg,moduleName:this.formData.moduleName,authorName:this.formData.author,emailAddress:this.formData.email,removePrefix:this.formData.isRemovePrefix,autoSettingModuleName:this.formData.autoSettingModuleName,modules:e};this.$ajax({url:"/generator/gen",method:"post",responseType:"blob",data:t}).then(function(e){var t=new Blob([e.data]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(t,"code.zip");else{var a=document.createElement("a");document.createEvent("HTMLEvents").initEvent("click",!1,!1),a.href=URL.createObjectURL(t),a.download="code.zip",a.style.display="none",document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(a.href)}})},pageData:function(){var e=this;this.$ajax({url:"/generator/list",method:"get",params:{page:this.page,limit:this.limit,tableName:this.tableName}}).then(function(t){var a=t.data;e.total=a.total,e.tbs=a.list})}})},T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Card",[a("Row",[a("Col",{attrs:{span:"16"}},[e._v("Table Name:\n        "),a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"Typing Table Name",clearable:!0},model:{value:e.tableName,callback:function(t){e.tableName=t},expression:"tableName"}}),e._v(" "),a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:function(t){e.page=1,e.pageData()}}},[e._v("Search")])],1),e._v(" "),a("Col",{attrs:{span:"6"}},[a("Dropdown",[a("a",{attrs:{href:"javascript:void(0)"}},[a("Tag",{attrs:{type:"dot",color:"primary"}},[e._v("已添加 "+e._s(e.tablesLength))])],1),e._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},e._l(e.tables,function(t){var l=t.tableName;return a("DropdownItem",{key:l},[a("div",{staticStyle:{height:"25px"}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("span",{staticStyle:{float:"left","line-height":"25px"}},[e._v(e._s(l))])]),e._v(" "),a("Col",{attrs:{span:"8"}},[a("Button",{staticStyle:{position:"relative",bottom:"4px",color:"red"},attrs:{type:"text"},on:{click:function(t){return e.removeTable(l)}}},[e._v("Remove\n                    ")])],1)],1)],1)])}),1)],1),e._v(" "),a("Button",{attrs:{shape:"circle"},on:{click:e.gen}},[e._v("Generate")])],1),e._v(" "),a("Col",{attrs:{span:"2"}},[a("Poptip",{attrs:{title:"Config",placement:"left"},on:{"on-popper-hide":e.saveConfig}},[a("div",{staticStyle:{width:"400px"},attrs:{slot:"content"},slot:"content"},[a("Form",{attrs:{"label-width":100}},[a("FormItem",{attrs:{label:"Main Path"}},[a("Input",{model:{value:e.formData.mainPath,callback:function(t){e.$set(e.formData,"mainPath",t)},expression:"formData.mainPath"}})],1),e._v(" "),a("FormItem",{attrs:{label:"Package Name"}},[a("Input",{model:{value:e.formData.pkg,callback:function(t){e.$set(e.formData,"pkg",t)},expression:"formData.pkg"}})],1),e._v(" "),a("FormItem",{attrs:{label:"Author Name"}},[a("Input",{model:{value:e.formData.author,callback:function(t){e.$set(e.formData,"author",t)},expression:"formData.author"}})],1),e._v(" "),a("FormItem",{attrs:{label:"Email Address"}},[a("Input",{model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}})],1),e._v(" "),a("FormItem",{attrs:{label:"Module Name"}},[a("Checkbox",{model:{value:e.formData.autoSettingModuleName,callback:function(t){e.$set(e.formData,"autoSettingModuleName",t)},expression:"formData.autoSettingModuleName"}},[e._v("Auto Setting")]),e._v(" "),e.formData.autoSettingModuleName?e._e():a("Input",{staticStyle:{width:"204px"},model:{value:e.formData.moduleName,callback:function(t){e.$set(e.formData,"moduleName",t)},expression:"formData.moduleName"}})],1),e._v(" "),a("FormItem",{attrs:{label:"Remove Prefix"}},[a("i-switch",{attrs:{size:"large"},model:{value:e.formData.isRemovePrefix,callback:function(t){e.$set(e.formData,"isRemovePrefix",t)},expression:"formData.isRemovePrefix"}})],1)],1)],1),e._v(" "),a("Button",{staticStyle:{float:"right",color:"blue"},attrs:{type:"text",icon:"ios-cog-outline"}},[e._v("Config")])],1)],1)],1)],1),e._v(" "),a("Table",{attrs:{columns:e.columns,height:"600",data:e.tbs,"no-data-text":"Can Not Find Table"},scopedSlots:e._u([{key:"operator",fn:function(t){var l=t.row;return[a("Button",{attrs:{shape:"circle",icon:"ios-more"},on:{click:function(t){return e.openConfig(l)}}},[e._v("Add")])]}}])}),e._v(" "),a("Page",{staticStyle:{float:"right"},attrs:{total:e.total,"page-size":e.limit,"show-sizer":""},on:{"on-change":e.pageHandle,"on-page-size-change":e.pageSizeHandle}}),e._v(" "),a("more-config",{ref:"configModal"})],1)},staticRenderFns:[]},C=a("VU/8")(g,T,!1,null,null,null).exports;l.default.use(i.a);var N=new i.a({routes:[{path:"/",name:"Main",component:r,children:[{path:"/generator",name:"Generator",component:C}]}]});N.beforeEach(function(e,t,a){"/"===e.path?N.push({name:"Generator"}):a()});var k=N,x=a("BTaQ"),_=a.n(x),y=(a("+skl"),a("mtWM")),w=a.n(y);l.default.use(b.a);var D=new b.a.Store({state:{tables:[]},mutations:{updateTables:function(e,t){e.tables=t}}});l.default.prototype.$ajax=w.a,l.default.use(_.a),l.default.config.productionTip=!1,new l.default({el:"#app",router:k,store:D,components:{App:o},template:"<App/>"}),Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)}},uCZS:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.d89860893d4f48ed322e.js.map